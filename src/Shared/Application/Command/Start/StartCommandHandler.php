<?php

declare(strict_types=1);

namespace App\Shared\Application\Command\Start;

use App\Shared\Domain\TelegramInterface;
use Symfony\Component\Messenger\Attribute\AsMessageHandler;

#[AsMessageHandler]
class StartCommandHandler
{
    public function __construct(
        private readonly TelegramInterface $telegram,
    ) {
    }

    public function __invoke(StartCommand $command): void
    {
        $text = 'ðŸ¤– Ð¢ÐµÐ»ÐµÐ³Ñ€Ð°Ð¼-Ð±Ð¾Ñ‚ Ð´Ð»Ñ Ð·Ð°Ð¿Ð¸ÑÐ¸ Ð½Ð° Ñ€Ð°Ð·Ð³Ð¾Ð²Ð¾Ñ€Ð½Ñ‹Ðµ ÐºÐ»ÑƒÐ±Ñ‹ ðŸŽ™ï¸

ðŸŒŸ ÐžÐ¿Ð¸ÑÐ°Ð½Ð¸Ðµ:
ÐŸÑ€Ð¸Ð²ÐµÑ‚! Ð¯ - ÑƒÐ¼Ð½Ñ‹Ð¹ Ñ‚ÐµÐ»ÐµÐ³Ñ€Ð°Ð¼-Ð±Ð¾Ñ‚, ÑÐ¾Ð·Ð´Ð°Ð½Ð½Ñ‹Ð¹ Ð´Ð»Ñ Ð¾Ð±Ð»ÐµÐ³Ñ‡ÐµÐ½Ð¸Ñ Ð·Ð°Ð¿Ð¸ÑÐ¸ Ð½Ð° Ñ€Ð°Ð·Ð³Ð¾Ð²Ð¾Ñ€Ð½Ñ‹Ðµ ÐºÐ»ÑƒÐ±Ñ‹. ÐœÐ¾Ð¹ Ð¾ÑÐ½Ð¾Ð²Ð½Ð¾Ð¹ Ð·Ð°Ð´Ð°Ñ‡ÐµÐ¹ ÑÐ²Ð»ÑÐµÑ‚ÑÑ Ð¿Ð¾Ð¼Ð¾Ñ‡ÑŒ Ñ‚ÐµÐ±Ðµ Ð½Ð°Ð¹Ñ‚Ð¸ Ð¿Ð¾Ð´Ñ…Ð¾Ð´ÑÑ‰Ð¸Ð¹ Ñ€Ð°Ð·Ð³Ð¾Ð²Ð¾Ñ€Ð½Ñ‹Ð¹ ÐºÐ»ÑƒÐ±, Ð·Ð°Ñ€ÐµÐ³Ð¸ÑÑ‚Ñ€Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒÑÑ Ð½Ð° ÑƒÐ´Ð¾Ð±Ð½ÑƒÑŽ Ð´Ð»Ñ Ñ‚ÐµÐ±Ñ Ð´Ð°Ñ‚Ñƒ Ð¸ Ð²Ñ€ÐµÐ¼Ñ, Ð° Ñ‚Ð°ÐºÐ¶Ðµ Ð½Ð°Ð¿Ð¾Ð¼Ð¸Ð½Ð°Ñ‚ÑŒ Ð¾ Ð¿Ñ€ÐµÐ´ÑÑ‚Ð¾ÑÑ‰Ð¸Ñ… Ð²ÑÑ‚Ñ€ÐµÑ‡Ð°Ñ…. ÐÐµÐ·Ð°Ð²Ð¸ÑÐ¸Ð¼Ð¾ Ð¾Ñ‚ Ñ‚Ð¾Ð³Ð¾, Ñ…Ð¾Ñ‡ÐµÑˆÑŒ Ð»Ð¸ Ñ‚Ñ‹ ÑƒÐ»ÑƒÑ‡ÑˆÐ¸Ñ‚ÑŒ ÑÐ²Ð¾Ð¸ Ð½Ð°Ð²Ñ‹ÐºÐ¸ Ð¸Ð½Ð¾ÑÑ‚Ñ€Ð°Ð½Ð½Ð¾Ð³Ð¾ ÑÐ·Ñ‹ÐºÐ°, Ð½Ð°Ð¹Ñ‚Ð¸ Ð½Ð¾Ð²Ñ‹Ñ… Ð´Ñ€ÑƒÐ·ÐµÐ¹ Ð¸Ð»Ð¸ Ð¿Ñ€Ð¾ÑÑ‚Ð¾ Ð¿Ñ€Ð¾Ð²ÐµÑÑ‚Ð¸ Ð²Ñ€ÐµÐ¼Ñ Ñ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð¹ - Ñ Ð·Ð´ÐµÑÑŒ, Ñ‡Ñ‚Ð¾Ð±Ñ‹ Ð¿Ð¾Ð¼Ð¾Ñ‡ÑŒ!';
        if ($command->isAdmin === true) {
            $text .= "\n\nðŸ‘®â€ï¸ Ð’Ñ‹ Ð°Ð´Ð¼Ð¸Ð½Ð¸ÑÑ‚Ñ€Ð°Ñ‚Ð¾Ñ€ Ð±Ð¾Ñ‚Ð°, Ð¿Ð¾ÑÑ‚Ð¾Ð¼Ñƒ Ñƒ Ð²Ð°Ñ ÐµÑÑ‚ÑŒ Ð´Ð¾ÑÑ‚ÑƒÐ¿ Ðº Ð´Ð¾Ð¿Ð¾Ð»Ð½Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ñ‹Ð¼ Ñ„ÑƒÐ½ÐºÑ†Ð¸ÑÐ¼";
        }

        $this->telegram->sendMessage(
            chatId: $command->chatId,
            text: $text,
            replyMarkup: ($command->isAdmin === true)
                ? [
                    [[
                        'text' => 'ðŸ“… ÐŸÐ¾ÑÐ¼Ð¾Ñ‚Ñ€ÐµÑ‚ÑŒ Ñ€Ð°ÑÐ¿Ð¸ÑÐ°Ð½Ð¸Ðµ',
                        'callback_data' => 'admin_upcoming_clubs',
                    ]],
                    [[
                        'text' => 'ðŸ“ Ð”Ð¾Ð±Ð°Ð²Ð¸Ñ‚ÑŒ Ð½Ð¾Ð²Ñ‹Ð¹ Ñ€Ð°Ð·Ð³Ð¾Ð²Ð¾Ñ€Ð½Ñ‹Ð¹ ÐºÐ»ÑƒÐ±',
                        'callback_data' => 'admin_create_club',
                    ]],
                    [[
                        'text' => 'ðŸ“¤ ÐžÑ‚Ð¿Ñ€Ð°Ð²Ð¸Ñ‚ÑŒ ÑÐ¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ðµ Ð²ÑÐµÐ¼ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑÐ¼ Ð±Ð¾Ñ‚Ð°',
                        'callback_data' => 'admin_send_message',
                    ]],
                ]
                : [
                    [[
                        'text' => 'ðŸ“… ÐŸÐ¾ÑÐ¼Ð¾Ñ‚Ñ€ÐµÑ‚ÑŒ Ñ€Ð°ÑÐ¿Ð¸ÑÐ°Ð½Ð¸Ðµ',
                        'callback_data' => 'upcoming_clubs',
                    ]],
                    [[
                        'text' => 'ðŸ’Œ ÐŸÐ¾ÑÐ¼Ð¾Ñ‚Ñ€ÐµÑ‚ÑŒ Ð¼Ð¾Ð¸ Ð·Ð°Ð¿Ð¸ÑÐ¸',
                        'callback_data' => 'my_upcoming_clubs',
                    ]],
                ],
        );
    }
}
